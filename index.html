<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>マルモン占い</title>

<!-- 🌸 サンリオ風デザインCSS -->
<style>
body {
  background: linear-gradient(180deg, #ffe9f4 0%, #f3f7ff 100%);
  font-family: "Nunito", "Rounded Mplus 1c", "Hiragino Maru Gothic ProN", sans-serif;
  color: #555;
  text-align: center;
  margin: 0;
  padding: 0;
}

header {
    background-color: #d4f4dd; /* 薄い緑 */
  color: #4B0082; /* 濃い紫 */
  padding: 1.5em 0;
  box-shadow: 0 2px 5px rgba(150, 255, 150, 0.2);
}

h1 {
  color: #FF1493; /* 濃いピンク寄り */
  font-size: 3em;
  margin-bottom: 0.1em;
}

h2 {
  color: #ff7fbf;
  margin-top: 1em;
}

section {
  background-color: #fff;
  margin: 2em auto;
  padding: 2em;
  border-radius: 16px;
  box-shadow: 0 3px 10px rgba(0,0,0,0.05);
  max-width: 500px;
}

button {
  background-color: #ffb6c1;
  color: #fff;
  border: none;
  padding: 0.8em 1.5em;
  font-size: 1em;
  border-radius: 25px;
  cursor: pointer;
  margin-top: 1em;
  transition: 0.2s;
}

button:hover {
  background-color: #ff99b6;
}

img {
  margin-top: 1em;
  border-radius: 12px;
}

footer {
  color: #aaa;
  font-size: 1.2em;
  margin-bottom: 2em;
}
</style>
</head>

<body>
<header>
  <h1> マルモン占い </h1>
  <p>あなたの人生に役立つヒントをお届け！</p>
</header>

<section>
  <h2>⭐️生年月日を入力してね⭐️</h2>
  <input type="date" id="birthday">
  <br>
  <button onclick="analyze()">占う！</button>

  <div id="result"></div>
</section>

<footer> marumon uranai</footer>

<!-- ✨ 占いロジック -->
<script>
const marumon = {
    1: { name: "リオン", animal: "🦁", img: "1.png" },
  2: { name: "ミーミ", animal: "🐰", img: "2.png" },
  3: { name: "ピコ", animal: "🐦", img: "3.png" },
  4: { name: "バル", animal: "🦫", img: "4.png" },
  5: { name: "ネロス", animal: "🦊", img: "5.png" },
  6: { name: "スワリン", animal: "🦢", img: "6.png" },
  7: { name: "タルーシャ", animal: "🐢", img: "7.png" },
  8: { name: "くまドン", animal: "🐻", img: "8.png" },
  9: { name: "ポット", animal: "🕊", img: "9.png" },
  11: { name: "シロー", animal: "🐶", img: "11.png" },
  22: { name: "ダイト", animal: "🐘", img: "22.png" },
  33: { name: "ホーすけ", animal: "🦉", img: "33.png" }
};

// ライフパスナンバーを算出
function getLifePathNumber(birthday) {
  const nums = birthday.replaceAll('-', '').split('').map(Number);
  let sum = nums.reduce((a,b) => a+b, 0);
  while (sum > 9 && sum !== 11 && sum !== 22 && sum !== 33) {
    sum = String(sum).split('').reduce((a,b) => a + Number(b), 0);
  }
  return sum;
}

// ユリウス日を求める
function getJulianDay(year, month, day) {
  if (month <= 2) { year -= 1; month += 12; }
  const A = Math.floor(year / 100);
  const B = 2 - A + Math.floor(A / 4);
  return Math.floor(365.25 * (year + 4716))
       + Math.floor(30.6001 * (month + 1))
       + day + B - 1524.5;
}

// 十干（日柱）を簡易計算
const tenkan = ["大木","花","炎","キャンドル","山","土","斧","宝石","川","雨"];

function getDayStem(year, month, day) {
  const jd = Math.floor(getJulianDay(year, month, day) + 0.5);
  const baseJD = 2415021; // 基準日
  const diff = jd - baseJD;
  const stemIndex = (diff + 10) % 10;
  return tenkan[stemIndex];
}

// 結果表示
function analyze() {
  const birth = document.getElementById("birthday").value;
  if (!birth) return alert("生年月日を入力してね！");
  const [y, m, d] = birth.split('-').map(Number);

  const num = getLifePathNumber(birth);
  const stem = getDayStem(y, m, d);
  const result = marumon[num] || marumon[9];

  document.getElementById("result").innerHTML = `
    <h2>${result.animal} ${result.name}</h2>
    <img src="images/${result.img}" alt="${result.name}" width="180">
    <p>属性：<strong>${stem}</strong></p>
  `;
}
</script>
</body>
</html>
